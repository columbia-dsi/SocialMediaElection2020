---
author: "Kevin Gao (wg2311), Haibo Yu (hy2628)"
output: 
  html_document:
    code_folding: hide
---
# Interactive Components

## Interactive Choropleth Maps (R Component)

* Here are core plots for our study to show which candidate in which state are actually more popular online, based on video viewers' likes and dislikes aggragation, so we decided to make it interactive for the users:

<video width="700" height="500" controls>
  <source src="data/InteractivePlotVideo.mp4" type="video/mp4">
</video>

(Video captured, feel free to checkout the source code below:)

```r
library(tidyverse)
library(dplyr)
library(choroplethr)
library(ggplot2)
library(plotly)
# load social meida data - Youtube, from 12/12/2019:
df2 <- read.csv("data/2019-12-12.csv")
df2 <- filter(df2, candidate != "Donald Trump")
df2 <- filter(df2, title!="2020 Democratic Debate - SNL")  # remove irrelated videos
df2 <- filter(df2, title!="DNC Town Hall - SNL")  # remove irrelated videos
df2 <- filter(df2, title!="2020 November Democratic Debate in Atlanta | The Daily Show")  # remove irrelated videos
df2 <- filter(df2, title!="2020 October Democratic Debate in Ohio | The Daily Show")  # remove irrelated videos
df2 <- filter(df2, title!="Stephen Colbert Breaks Down The 5th Democratic Presidential Debate")  # remove irrelated videos
df2 <- filter(df2, title!="Democratic candidates debate: Opening statements l ABC News")  # remove irrelated videos
df2 <- filter(df2, title!="I'm Gay - Eugene Lee Yang")  # remove irrelated videos
df2 <- filter(df2, title!="Mark Morrison - Return Of The Mack [OFFICIAL MUSIC VIDEO]")  # remove irrelated videos
df2 <- filter(df2, title!="Kavanaugh Hearing Cold Open - SNL")  # remove irrelated videos
df2 <- filter(df2, title!="THE CONJURING - The Real Lorraine Warren Featurette")  # remove irrelated videos
candidates <- c('Amy Klobuchar','Andrew Yang','Bernie Sanders','Cory Booker','Elizabeth Warren','Joe Biden','Kamala Harris','Pete Buttigieg','Tom Steyer','Tulsi Gabbard') 
for(i in candidates) {
  # i-th name of candiates
  # ------------------------------------------------------
  temp <- filter(df2, candidate == i) 
  
  temp <- temp %>% 
    as.data.frame() %>% 
    transmute(region = state, value = (as.numeric(temp$like)-as.numeric(temp$dislike)), like=like, dislike=dislike)
  # unique(df$region)  45 states
  
  temp <- temp %>%
    group_by(region) %>%
    summarise(value = sum(value), like=sum(like), dislike=sum(dislike))
  
  temp <- na.omit(temp)
  temp$hover <- with(temp, paste(region, '<br>', 'Value', value, '<br>','Like',like,'<br>', 'Dislike',dislike))
  # give state boundaries a white border
  l <- list(color = toRGB("#ece3fc"), width = 5)
  # specify some map projection/options
  g <- list(
    scope = 'usa',
    projection = list(type = 'albers usa'),
    showlakes = TRUE,
    lakecolor = toRGB('#ece3fc')
  )
  
  p <- plot_geo(temp, locationmode = 'USA-states') %>%
    add_trace(
      z = ~value, text = ~hover, locations = ~state.abb[which(state.name == region)],
      color = ~value, colors = 'Purples'
    ) %>%
    colorbar(title = "Like Count") %>%
    layout(
      title = paste(i," - Youtube Likes by State<br>(Hover for breakdown)"),
      geo = g
    )
  print(p)
  # ------------------------------------------------------
}
```


## Interactive Social Media Demographics (Html Component)

(credit: Pew Research Center)

### Social media use over time

<iframe src='https://www.pewresearch.org/internet/chart/social-media-use/iframe/' id='pew17380' scrolling='no' width='100%' height='600px' frameborder='0'></iframe> <script type='text/javascript'id='pew-iframe'>(function(){function async_load(){var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='https://www.pewresearch.org/internet/wp-content/plugins/pew-refactor-shim/pew-scripts/js/iframeResizer.min.js';s.onload=s.onreadystatechange=function(){var rs=this.readyState;try{iFrameResize([],'iframe#pew17380')}catch(e){}};var embedder=document.getElementById('pew-iframe');embedder.parentNode.insertBefore(s,embedder)}if(window.attachEvent)window.attachEvent('onload',async_load);else window.addEventListener('load',async_load,false)})();</script>			



### Who uses social media

<iframe src='https://www.pewresearch.org/internet/chart/social-media-use-by-community-type/iframe/' id='pew17895' scrolling='no' width='100%' height='600px' frameborder='0'></iframe> <script type='text/javascript'id='pew-iframe'>(function(){function async_load(){var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='https://www.pewresearch.org/internet/wp-content/plugins/pew-refactor-shim/pew-scripts/js/iframeResizer.min.js';s.onload=s.onreadystatechange=function(){var rs=this.readyState;try{iFrameResize([],'iframe#pew17895')}catch(e){}};var embedder=document.getElementById('pew-iframe');embedder.parentNode.insertBefore(s,embedder)}if(window.attachEvent)window.attachEvent('onload',async_load);else window.addEventListener('load',async_load,false)})();</script>			


### Which social media platforms are most popular

<iframe src='https://www.pewresearch.org/internet/chart/which-social-media-platforms-are-most-popular/iframe/' id='pew17383' scrolling='no' width='100%' height='600px' frameborder='0'></iframe> <script type='text/javascript'id='pew-iframe'>(function(){function async_load(){var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='https://www.pewresearch.org/internet/wp-content/plugins/pew-refactor-shim/pew-scripts/js/iframeResizer.min.js';s.onload=s.onreadystatechange=function(){var rs=this.readyState;try{iFrameResize([],'iframe#pew17383')}catch(e){}};var embedder=document.getElementById('pew-iframe');embedder.parentNode.insertBefore(s,embedder)}if(window.attachEvent)window.attachEvent('onload',async_load);else window.addEventListener('load',async_load,false)})();</script>		

### How often Americans use social media sites

<iframe src='https://www.pewresearch.org/internet/chart/how-often-americans-are-using-social-media/iframe/' id='pew17381' scrolling='no' width='100%' height='600px' frameborder='0'></iframe> <script type='text/javascript'id='pew-iframe'>(function(){function async_load(){var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='https://www.pewresearch.org/internet/wp-content/plugins/pew-refactor-shim/pew-scripts/js/iframeResizer.min.js';s.onload=s.onreadystatechange=function(){var rs=this.readyState;try{iFrameResize([],'iframe#pew17381')}catch(e){}};var embedder=document.getElementById('pew-iframe');embedder.parentNode.insertBefore(s,embedder)}if(window.attachEvent)window.attachEvent('onload',async_load);else window.addEventListener('load',async_load,false)})();</script>	





[![Github](imgs/GitHub.png)](https://github.com/columbia-dsi/SocialMediaElection2020)